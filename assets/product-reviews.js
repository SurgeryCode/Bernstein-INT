if(!customElements.get("reviews-section")){class a extends HTMLElement{constructor(){super(),this.channel=this.getAttribute("data-channel"),this.sku=this.getAttribute("data-sku").split(","),this.end=!1,this.swiper=void 0,this.data=[],this.page=1,this.container=this.querySelector(".swiper-wrapper"),this.button_filter=this.querySelectorAll("[data-filter-button]"),this.average=this.querySelector("[data-reviews-average]"),this.average_stars=this.querySelector(".reviews__summary-stars"),this.reviews_count=this.querySelector("[data-total-reviews-count]"),this.height=0,this.empty=this.querySelector(".reviews__empty"),this.interval=0,this.total=0,this.initSwiper(),this.sku&&this.fetchReviews(),this.button_filter.forEach(t=>{t.addEventListener("click",()=>{let e=0;const i=t.getAttribute("data-filter-button");this.button_filter.forEach(t=>t.setAttribute("aria-expanded","false")),t.setAttribute("aria-expanded","true"),this.container.innerHTML="","all"==i?this.data.forEach(t=>{this.drawItem(t),e++}):this.data.forEach(t=>{t.rating==i&&(this.drawItem(t),e++)}),this.swiper.update(),this.swiper.slideTo(0,0),this.matchHeight(),0<e?this.empty.style.display="none":this.empty.style.display="block"})})}async fetchReviews(){var t=this.sku.map(t=>fetch(`https://etrusted.bernstein.store/api/reviews?channel=${this.channel}&sku=${t}&per_page=100&page=`+this.page).then(t=>t.json())),t=await Promise.all(t);let e=0,i=0;for(const s of t)s.data.forEach(t=>{this.data.push(t),this.drawItem(t),e++,i+=s.meta.average_rating});0<e?(i/=e,this.average.innerText=i.toFixed(2),this.reviews_count.innerText=e,this.average_stars.setAttribute("data-stars",Math.ceil(i)),this.button_filter.forEach(t=>{if(t.querySelector("[data-reviews-count]")){const i=t.getAttribute("data-filter-button");var e=this.data.filter(t=>t.rating==i).length;t.querySelector("[data-reviews-count]").innerText=`(${e})`}}),this.swiper.update(),this.matchHeight()):this.style.display="none"}initSwiper(){this.swiper=new Swiper(this.querySelector(".swiper-container"),{loop:!1,grabCursor:!0,speed:500,spaceBetween:16,slidesPerView:"auto",watchSlidesProgress:!0,setWrapperSize:!0,observer:!0,observeSlideChildren:!0,breakpoints:{768:{spaceBetween:24,slidesPerView:"auto"},1200:{spaceBetween:24,slidesPerView:3}}})}drawItem(t){if(t.comment||t.product_sku){var i=document.createElement("div"),s=parseInt(t.rating);let e="";for(let t=1;t<6;t++)e+=`<svg width="12" height="12" viewBox="0 0 12 12" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M5.524.964a.5.5 0 0 1 .952 0l.983 3.027a.5.5 0 0 0 .476.346h3.184a.5.5 0 0 1 .293.904L8.837 7.113a.5.5 0 0 0-.182.559L9.64 10.7a.5.5 0 0 1-.77.559L6.295 9.387a.5.5 0 0 0-.588 0L3.13 11.26a.5.5 0 0 1-.769-.56l.984-3.027a.5.5 0 0 0-.182-.56L.588 5.243a.5.5 0 0 1 .293-.905h3.184a.5.5 0 0 0 .476-.346L5.524.964Z" fill="${s>=t?"#111111":"#e5e5e5"}"/></svg>`;i.classList.add("swiper-slide"),i.setAttribute("data-rating",t.rating),i.innerHTML=`<div class="reviews__item"><span class="label">${window.accessibility.verified}</span><div class="reviews__item-header"><div class="reviews__item-stars">${e}</div><time class="f-14 gray">${this.formatDate(t.submitted_at)}</time></div><p>${t.comment||""}</p></div>`,this.container.append(i),this.empty.style.display="none"}}formatDate(t){t=new Date(t);return`${t.getDate()} ${window.accessibility.months[t.getMonth()].substring(0,3)} `+t.getFullYear()}matchHeight(){this.container.querySelectorAll(".reviews__item").forEach(t=>{t.offsetHeight>this.height&&(this.height=t.offsetHeight)}),this.height<240&&(this.height=240),this.style.setProperty("--box-height",this.height+"px")}}customElements.define("reviews-section",a)}