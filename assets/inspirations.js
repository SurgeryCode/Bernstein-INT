if(!customElements.get("inspirations-section")){class a extends HTMLElement{constructor(){super(),this.swiper=void 0,this.grid=this.querySelector(".inspirations__grid"),this.empty=this.querySelector(".inspirations__empty"),this.item=document.querySelector(".inspirations__item"),this.button_filters=this.querySelector(".filters__button"),this.button_reset=this.querySelector("[data-reset-filters]"),this.selected=[],this.filters=this.querySelectorAll(".chips input[name]"),this.drawer_filters=document.querySelectorAll("#drawer-inspirations-filters input[name]"),this.drawer_content=document.querySelector("#drawer-inspirations-details .drawer__scroll-inner");const e=window.matchMedia("(max-width: 991px)");e.addEventListener("change",()=>this.onResize(e)),this.onResize(e),this.querySelector(".inspirations__grid")&&this.init(),this.item&&new ResizeObserver(e=>{for(const t of e)t.contentBoxSize&&0<this.item.offsetWidth&&this.style.setProperty("--box-width",this.item.offsetWidth+"px")}).observe(this.item),this.button_filters&&window.addEventListener("scroll",()=>{this.onScroll()}),this.grid&&this.grid.querySelectorAll("[data-handle]").forEach(e=>{e.addEventListener("click",()=>{console.log("tutu"),this.details(e.getAttribute("data-handle"))})})}init(){this.items=this.querySelectorAll(".inspirations__grid-item"),this.filters.forEach(t=>{t.addEventListener("change",()=>{var e;t.checked?this.selected.push(t.value):-1!=(e=this.selected.indexOf(t.value))&&this.selected.splice(e,1),this.filter(),0<this.selected.length?this.button_reset.style.display="inline":this.button_reset.style.display="none"})}),this.drawer_filters.forEach(t=>{const i=t.name.replace("drawer-","");t.addEventListener("change",()=>{let e=void 0;if("checkbox"==t.type||"radio"==t.type){if(!(e=this.querySelector(`input[name="${i}"][value="${t.value}"]`)))return;e.checked=t.checked}e.dispatchEvent(new Event("change"))})}),this.button_reset.addEventListener("click",()=>{this.filters.forEach(e=>e.checked=!1),this.drawer_filters.forEach(e=>e.checked=!1),this.button_reset.style.display="none",this.selected=[],this.filter()}),this.grid.classList.remove("inspirations__grid--loading")}filter(){0==this.selected.length?this.items.forEach(e=>e.style.display="block"):this.items.forEach(e=>{var t,i=e.getAttribute("data-category").split(";");let s="none";for(t in i)if(-1!=this.selected.indexOf(i[t])){this.item=e,s="block";break}e.style.display=s})}details(e){this.drawer_content.innerHTML="",window.dispatchEvent(new CustomEvent("drawerOpen",{detail:{id:"drawer-inspirations-details"}})),fetch(window.routes.inspiration_url+"/"+e).then(e=>e.text()).then(e=>{var t=document.createElement("div");t.innerHTML=e,this.drawer_content.innerHTML=t.querySelector("[data-content]").innerHTML;const i=this.drawer_content.querySelector(".button[data-filter]");i&&i.addEventListener("click",e=>{e.preventDefault();const t=i.getAttribute("data-filter");this.drawer_filters.forEach(e=>{e.checked=t===e.value}),this.filters.forEach(e=>{e.checked=t===e.value,e.checked&&e.dispatchEvent(new Event("change"))}),window.dispatchEvent(new CustomEvent("drawerClose"))});e=this.drawer_content.querySelector(".js-add-all");e&&e.addEventListener("click",e=>{e.preventDefault();e=this.drawer_content.querySelectorAll(".inspiration__product[data-variant-id]"),e=Array.from(e).map(e=>({id:Number(e.dataset.variantId||e.getAttribute("data-variant-id")),quantity:1})).filter(e=>!Number.isNaN(e.id));e.length&&fetch("/cart/add.js",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({items:e})}).then(e=>e.json()).then(e=>{console.log("added",e),window.location.href="/cart"}).catch(e=>console.error(e))})})}onResize(e){this.querySelector(".swiper-container")&&(e.matches?void 0===this.swiper&&(e=this.querySelector(".swiper-scrollbar"),this.swiper=new Swiper(this.querySelector(".swiper-container"),{loop:!1,grabCursor:!0,speed:500,spaceBetween:16,slidesPerView:"auto",watchSlidesProgress:!0,scrollbar:{el:e,enabled:!0},breakpoints:{768:{spaceBetween:24,slidesPerView:"auto"},1200:{spaceBetween:32,slidesPerView:4}}})):void 0!==this.swiper&&(this.swiper.destroy(),this.swiper=void 0))}onScroll(){window.lastScroll<66?this.button_filters.classList.remove("filters__button--stick"):this.button_filters.classList.add("filters__button--stick")}}customElements.define("inspirations-section",a)}