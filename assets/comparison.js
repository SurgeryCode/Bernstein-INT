if(!customElements.get("comparison-section")){class a extends HTMLElement{constructor(){super(),this.items=this.querySelector(".comparison__items .swiper-wrapper"),this.details=this.querySelector(".comparison__details .swiper-wrapper"),this.data=localStorage.getItem("bernstein-comparison")?JSON.parse(localStorage.getItem("bernstein-comparison")):[],this.swiper_items=void 0,this.swiper_details=void 0,0<this.data.length&&this.fetchProducts(),window.addEventListener("compareRemove",e=>{this.remove(e.detail.id)}),this.initSliders(),this.updateView()}fetchProducts(){this.data.forEach(e=>{fetch(routes.search_url+`?type=product&q=variants.sku:${e}&view=sku-compare`).then(e=>e.text()).then(e=>{var t;10<e.length&&((t=document.createElement("div")).innerHTML=e,t.querySelectorAll("td").forEach(e=>{e.innerText&&!/^\s*$/.test(e.innerText)||e.closest("tr").remove()}),this.items.innerHTML+=t.querySelector(".comparison__item-product").innerHTML,this.details.innerHTML+=t.querySelector(".comparison__item-details").innerHTML,this.swiper_items.update(),this.swiper_details.update(),this.matchHeight(),this.bindGallery())}).catch(e=>{console.log(e)})})}remove(e){var t=this.data.indexOf(e);-1!=t&&(this.data.splice(t,1),localStorage.setItem("bernstein-comparison",JSON.stringify(this.data)),this.querySelectorAll(`.swiper-slide[data-sku="${e}"]`).forEach(e=>e.remove()),this.swiper_items.update(),this.swiper_details.update(),0<this.data.length&&this.matchHeight(),this.updateView())}initSliders(){var e=this.querySelector(".swiper-scrollbar"),t=this.querySelector(".arrow--left"),s=this.querySelector(".arrow--right");this.swiper_items=new Swiper(this.querySelector(".comparison__items .swiper-container"),{loop:!1,grabCursor:!1,speed:500,spaceBetween:16,slidesPerView:2,watchSlidesProgress:!0,scrollbar:{el:e,enabled:!0},navigation:{nextEl:s,prevEl:t},breakpoints:{768:{spaceBetween:24,slidesPerView:3},1200:{spaceBetween:24,slidesPerView:4}}}),this.swiper_details=new Swiper(this.querySelector(".comparison__details .swiper-container"),{loop:!1,grabCursor:!1,speed:500,spaceBetween:16,slidesPerView:2,watchSlidesProgress:!0,breakpoints:{768:{spaceBetween:24,slidesPerView:3},1200:{spaceBetween:24,slidesPerView:4}}}),this.swiper_items.controller.control=this.swiper_details,this.swiper_details.controller.control=this.swiper_items}matchHeight(){var e=this.querySelector(".comparison__details .swiper-slide").querySelectorAll(".comparison__table-item").length;for(let s=0;s<e;s++){let t=0;this.querySelectorAll(".comparison__details .swiper-slide").forEach(e=>{e.querySelectorAll(".comparison__table-item")[s].offsetHeight>t&&(t=e.querySelectorAll(".comparison__table-item")[s].offsetHeight)}),this.querySelectorAll(".comparison__details .swiper-slide").forEach(e=>{e.querySelectorAll(".comparison__table-item")[s].style.height=t+"px"})}}updateView(){this.querySelectorAll("[data-compare-count]").forEach(e=>e.innerText=this.data.length),0<this.data.length?(this.classList.add("comparison--enabled"),this.classList.remove("comparison--disabled")):(this.classList.remove("comparison--enabled"),this.classList.add("comparison--disabled"))}bindGallery(){this.querySelectorAll("[data-gallery-load]").forEach(e=>{e.addEventListener("click",()=>{window.dispatchEvent(new CustomEvent("loadGallery",{detail:{sku:e.getAttribute("data-gallery-load")}}))})})}}customElements.define("comparison-section",a)}