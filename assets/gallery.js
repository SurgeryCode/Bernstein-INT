if(!customElements.get("gallery-section")){class a extends HTMLElement{constructor(){var e,t,s;super(),window.galleryBind||(this.page=document.querySelector("main"),e=this.querySelector(".swiper-pagination"),t=this.querySelector(".arrow--left"),s=this.querySelector(".arrow--right"),this.videos=this.querySelectorAll("video"),this.wrapper=this.querySelector(".swiper-wrapper"),this.clicked=!1,this.swiper=new Swiper(this.querySelector(".swiper-container"),{loop:!1,grabCursor:!0,speed:500,spaceBetween:16,slidesPerView:1,watchSlidesProgress:!0,observer:!0,pagination:{el:e},navigation:{nextEl:s,prevEl:t},keyboard:{enabled:!0,onlyInViewport:!0},zoom:{limitToOriginalSize:!0},breakpoints:{768:{spaceBetween:24,slidesPerView:1},1200:{spaceBetween:32,slidesPerView:1}},on:{realIndexChange:e=>{this.videos.forEach(e=>e.pause()),0<e.slides.length&&e.slides[e.activeIndex].querySelector("video")&&e.slides[e.activeIndex].querySelector("video").play()},slidesUpdated:e=>{}}}),document.querySelectorAll("[data-gallery-open]").forEach(e=>{e.addEventListener("click",()=>{const s=e.dataset.galleryOpen;this.swiper.updateSlides();let i;this.wrapper.querySelectorAll(".swiper-slide.selected, .swiper-slide:not([data-variant-detail])").forEach((e,t)=>{e.dataset.id===s&&(i=t)}),this.swiper.slideTo(i,0,!1),this.open()})}),this.querySelectorAll("[data-gallery-close]").forEach(e=>{e.addEventListener("click",()=>{this.close()})}),window.addEventListener("loadGallery",e=>{this.load(e.detail.sku),this.open()}),window.addEventListener("escPressed",()=>{this.close()}),window.galleryBind=!0)}load(e){this.wrapper.innerHTML="",fetch(routes.search_url+`?type=product&q=variants.sku:${e}&view=sku-images`).then(e=>e.text()).then(e=>{10<e.length&&(this.wrapper.innerHTML+=e,this.swiper.update())}).catch(e=>{console.log(e)})}open(){this.style.display="block",document.body.style.overflow="hidden",document.body.style.paddingRight=window.scrollbarWidth+"px",setTimeout(()=>{this.style.opacity="1",document.body.classList.add("hide-badges")}),setTimeout(()=>{0<this.swiper.slides.length&&this.swiper.slides[this.swiper.activeIndex].querySelector("video")&&this.swiper.slides[this.swiper.activeIndex].querySelector("video").play()},200)}close(){this.style.opacity="0",this.clicked=!1,this.videos.forEach(e=>e.pause()),setTimeout(()=>{this.style.display="none",document.body.style.removeProperty("overflow"),document.body.style.removeProperty("padding-right")},300)}}customElements.define("gallery-section",a)}