if(!customElements.get("vat-validation")){class a extends HTMLElement{constructor(){super(),this.inputCompany=document.querySelector("#RegisterForm-Company"),this.inputTags=document.querySelector("#RegisterForm-Tags"),this.translations=JSON.parse(this.getAttribute("data-translations"))}connectedCallback(){this.input=this.querySelector("#RegisterForm-TaxId"),this.result=this.querySelector("#vat-result"),this.viesRegex={AT:/^ATU\d{8}$/,BE:/^BE0\d{9}$/,BG:/^BG\d{9,10}$/,CY:/^CY\d{8}[A-Z]$/,CZ:/^CZ\d{8,9,10}$/,DE:/^DE\d{9}$/,DK:/^DK\d{8}$/,EE:/^EE\d{9}$/,EL:/^EL\d{9}$/,ES:/^ES[A-Z0-9]\d{7}[A-Z0-9]$/,FI:/^FI\d{8}$/,FR:/^FR[A-Z0-9]{2}\d{9}$/,HR:/^HR\d{11}$/,HU:/^HU\d{8}$/,IE:/^IE\d[A-Z0-9\+\*]\d{5}[A-Z]$/,IT:/^IT\d{11}$/,LT:/^LT(\d{9}|\d{12})$/,LU:/^LU\d{8}$/,LV:/^LV\d{11}$/,MT:/^MT\d{8}$/,NL:/^NL\d{9}B\d{2}$/,PL:/^PL\d{10}$/,PT:/^PT\d{9}$/,RO:/^RO\d{2,10}$/,SE:/^SE\d{12}$/,SI:/^SI\d{8}$/,SK:/^SK\d{10}$/,GB:/^GB(\d{9}|\d{12}|GD\d{3}|HA\d{3})$/,XI:/^XI\d{9}$/,NO:/^NO\d{9}$/,CH:/^CHE\d{9}(MWST|TVA|IVA)?$/,IS:/^IS\d{5,6}$/,LI:/^LI\d{6}$/,TR:/^TR\d{10}$/,RS:/^RS\d{9}$/,UA:/^UA\d{12}$/,MK:/^MK\d{13}$/,AL:/^AL[J-Z]\d{8}[A-Z]$/,MD:/^MD\d{8}$/,ME:/^ME\d{9}$/,BA:/^BA\d{8}$/},this.input.addEventListener("blur",()=>this.validateVAT())}validateVATFormat(t,s){t=this.viesRegex[t];return!!t&&t.test(s)}async checkVIES(t,s){if(!this.validateVATFormat(t,s))return{valid:!1,message:this.translations.incorrect_vat};t=`https://vies-validation.dev2.mohi.to/vat_checker.php?country=${t}&vatNumber=`+s.substring(2);try{var e,i=await fetch(t);if(i.ok)return(e=await i.json()).isValid?{valid:!0,companyName:e.name,address:e.address}:{valid:!1,message:this.translations.inactive_vat};throw new Error(this.translations.connection_error)}catch(t){return{valid:!1,message:this.translations.connection_error}}}async validateVAT(){var t=this.input.value.trim().toUpperCase(),s=t.substring(0,2),e=t.substring(2);s&&e?(this.showResult(this.translations.checking,!0),(e=await this.checkVIES(s,t)).valid?(this.showResult("",!1),this.inputCompany&&(this.inputCompany.value=e.companyName),this.inputTags&&(this.inputTags.value="B2B")):(this.showResult(""+e.message,!1),this.inputTags&&(this.inputTags.value=""))):this.showResult(this.translations.incorrect_vat,!1)}showResult(t,s){this.result.textContent=t,this.result.style.color=!0===s?"green":""}}customElements.define("vat-validation",a)}