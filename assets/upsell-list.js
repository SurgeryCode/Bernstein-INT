if(!customElements.get("upsell-list")){class a extends HTMLElement{constructor(){if(super(),this.type=this.getAttribute("data-type")?this.getAttribute("data-type"):"item",this.getAttribute("data-sku")){const s=this.getAttribute("data-sku").split(",").filter(t=>t);this.sku=s.filter((t,e)=>s.indexOf(t)==e),new IntersectionObserver(t=>{t.forEach(t=>{t.isIntersecting&&this.fetchProducts()})},{rootMargin:"0px",threshold:.1}).observe(this)}this.addEventListener("clear",()=>{this.clear()})}fetchProducts(){if(!this.loaded){let e=0;this.sku.length<1&&(this.classList.add("upsell--loaded"),this.querySelector(".upsell__title").style.display="none"),this.sku.forEach(t=>{fetch(routes.search_url+`?type=product&q=variants.sku:${t}&view=sku-upsell-`+this.type).then(t=>t.text()).then(t=>{this.innerHTML+=t,e++,this.querySelector(".upsell__title")&&(this.querySelector(".upsell__title").style.display="block"),e==this.sku.length&&(this.classList.add("upsell--loaded"),0==this.querySelectorAll("upsell-item").length)&&(this.style.display="none")}).catch(t=>{console.log(t),this.classList.add("upsell--loaded")})}),this.loaded=!0}}clear(){this.loaded=!1,this.innerHTML="",this.classList.remove("upsell--loaded")}}customElements.define("upsell-list",a)}